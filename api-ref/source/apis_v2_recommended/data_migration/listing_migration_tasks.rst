:original_name: ListMigrationTask.html

.. _ListMigrationTask:

Listing Migration Tasks
=======================

Function
--------

This API is used to query the migration task list.

URI
---

GET /v2/{project_id}/migration-tasks

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+-------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                   |
   +============+===========+========+===============================================================================+
   | project_id | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID <dcs-api-0312045>`. |
   +------------+-----------+--------+-------------------------------------------------------------------------------+

.. table:: **Table 2** Query Parameters

   +-----------+-----------+---------+-----------------------------------------------------------------------------------------------------+
   | Parameter | Mandatory | Type    | Description                                                                                         |
   +===========+===========+=========+=====================================================================================================+
   | offset    | No        | Integer | Offset, which is the position where the query starts. The value must be greater than or equal to 0. |
   +-----------+-----------+---------+-----------------------------------------------------------------------------------------------------+
   | limit     | No        | Integer | Number of items displayed on each page.                                                             |
   +-----------+-----------+---------+-----------------------------------------------------------------------------------------------------+
   | name      | No        | String  | Name of the migration task.                                                                         |
   +-----------+-----------+---------+-----------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +-----------------+-------------------------------------------------------------------------------------------+----------------------------+
   | Parameter       | Type                                                                                      | Description                |
   +=================+===========================================================================================+============================+
   | count           | Integer                                                                                   | Number of migration tasks. |
   +-----------------+-------------------------------------------------------------------------------------------+----------------------------+
   | migration_tasks | Array of :ref:`MigrationTaskList <listmigrationtask__response_migrationtasklist>` objects | Migration task list.       |
   +-----------------+-------------------------------------------------------------------------------------------+----------------------------+

.. _listmigrationtask__response_migrationtasklist:

.. table:: **Table 4** MigrationTaskList

   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                 | Type             | Description                                                                                                                                                                                 |
   +===========================+==================+=============================================================================================================================================================================================+
   | task_id                   | String           | Migration task ID.                                                                                                                                                                          |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | task_name                 | String           | Migration task name.                                                                                                                                                                        |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                    | String           | Migration status. Options: **SUCCESS**, **FAILED**, **MIGRATING**, **TERMINATED**.                                                                                                          |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | migration_type            | String           | Migration mode, which can be backup file import or online migration.                                                                                                                        |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | migration_method          | String           | Type of the migration, which can be full migration or incremental migration.                                                                                                                |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ecs_tenant_private_ip     | String           | Private IP address of the migration ECS on the tenant side. This IP address can be added to the whitelist if it is in the same VPC as the private IP address of the target or source Redis. |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | data_source               | String           | Source Redis address, which is **ip:port** or a bucket name.                                                                                                                                |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | source_instance_name      | String           | Name of the source instance. If the source Redis is self-hosted, this parameter is left blank.                                                                                              |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | source_instance_id        | String           | ID of the source instance. If the source Redis is self-hosted, this parameter is left blank.                                                                                                |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | target_instance_addrs     | String           | Target Redis address. The format is **ip:port**.                                                                                                                                            |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | target_instance_name      | String           | Target instance name.                                                                                                                                                                       |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | target_instance_id        | String           | Target instance ID.                                                                                                                                                                         |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at                | String           | Time when the migration task is created.                                                                                                                                                    |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description               | String           | Description of the migration task.                                                                                                                                                          |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | source_instance_status    | String           | Status of the source instance. If the source Redis is self-hosted, this parameter is left blank.                                                                                            |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | target_instance_status    | String           | Status of the target instance.                                                                                                                                                              |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | source_instance_subnet_id | String           | ID of the source instance subnet. If the source Redis is self-hosted, this parameter is left blank.                                                                                         |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | target_instance_subnet_id | String           | ID of the target instance subnet.                                                                                                                                                           |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | source_instance_spec_code | String           | Specification code of the source instance. If the source Redis is self-hosted, this parameter is left blank.                                                                                |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | target_instance_spec_code | String           | Specification code of the target instance.                                                                                                                                                  |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | error_message             | String           | Error message.                                                                                                                                                                              |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | released_at               | String           | Time when the migration ECS is released.                                                                                                                                                    |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | version                   | String           | Version.                                                                                                                                                                                    |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resume_mode               | String           | Operation mode, which can be **auto** or **manual**.                                                                                                                                        |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | supported_features        | Array of strings | Supported features.                                                                                                                                                                         |
   +---------------------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

**Status code: 400**

.. table:: **Table 5** Response body parameters

   +---------------+--------+------------------------------------------------------------------------------------------+
   | Parameter     | Type   | Description                                                                              |
   +===============+========+==========================================================================================+
   | error_msg     | String | Error message.                                                                           |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_code    | String | Error code.                                                                              |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_ext_msg | String | Extended error information. This parameter is not used currently and is set to **null**. |
   +---------------+--------+------------------------------------------------------------------------------------------+

**Status code: 401**

.. table:: **Table 6** Response body parameters

   +---------------+--------+------------------------------------------------------------------------------------------+
   | Parameter     | Type   | Description                                                                              |
   +===============+========+==========================================================================================+
   | error_msg     | String | Error message.                                                                           |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_code    | String | Error code.                                                                              |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_ext_msg | String | Extended error information. This parameter is not used currently and is set to **null**. |
   +---------------+--------+------------------------------------------------------------------------------------------+

**Status code: 403**

.. table:: **Table 7** Response body parameters

   +---------------+--------+------------------------------------------------------------------------------------------+
   | Parameter     | Type   | Description                                                                              |
   +===============+========+==========================================================================================+
   | error_msg     | String | Error message.                                                                           |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_code    | String | Error code.                                                                              |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_ext_msg | String | Extended error information. This parameter is not used currently and is set to **null**. |
   +---------------+--------+------------------------------------------------------------------------------------------+

**Status code: 404**

.. table:: **Table 8** Response body parameters

   +---------------+--------+------------------------------------------------------------------------------------------+
   | Parameter     | Type   | Description                                                                              |
   +===============+========+==========================================================================================+
   | error_msg     | String | Error message.                                                                           |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_code    | String | Error code.                                                                              |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_ext_msg | String | Extended error information. This parameter is not used currently and is set to **null**. |
   +---------------+--------+------------------------------------------------------------------------------------------+

**Status code: 500**

.. table:: **Table 9** Response body parameters

   +---------------+--------+------------------------------------------------------------------------------------------+
   | Parameter     | Type   | Description                                                                              |
   +===============+========+==========================================================================================+
   | error_msg     | String | Error message.                                                                           |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_code    | String | Error code.                                                                              |
   +---------------+--------+------------------------------------------------------------------------------------------+
   | error_ext_msg | String | Extended error information. This parameter is not used currently and is set to **null**. |
   +---------------+--------+------------------------------------------------------------------------------------------+

Example Requests
----------------

.. code-block:: text

   GET https://{dcs_endpoint}/v2/666486c2d9b948c1bbea57e714d744fa/migration-tasks?offset=0&limit=10&name=dcs-migration-i9qk

Example Responses
-----------------

**Status code: 200**

Querying the migration task list.

.. code-block::

   {
     "count" : 1,
     "migration_tasks" : [ {
       "task_id" : "2944a563-6f27-4604-9c16-a9a53cd95cc7",
       "task_name" : "dcs-migration-test-6-16",
       "status" : "TERMINATED",
       "migration_type" : "online_migration",
       "migration_method" : "incremental_migration",
       "data_source" : "192.168.0.200:6379",
       "source_instance_name" : "migration-resource",
       "source_instance_id" : "132e0017-715b-4556-930a-95c7db7e8f7a",
       "target_instance_addrs" : "192.168.0.153:6379",
       "target_instance_name" : "migration-target",
       "target_instance_id" : "eb1a8d1c-9ea6-4fcd-ac43-c3d3c2493f06",
       "created_at" : "2021-06-16T06:12:55.508Z",
       "description" : "dcs-test",
       "source_instance_status" : "RUNNING",
       "target_instance_status" : "RUNNING",
       "source_instance_subnet_id" : "192.168.0.1",
       "target_instance_subnet_id" : "192.168.0.2",
       "source_instance_spec_code" : "redis.single.xu1.tiny.128",
       "target_instance_spec_code" : "redis.single.xu1.tiny.128",
       "error_message" : null,
       "released_at" : "202404011057",
       "version" : "6.0.21",
       "resume_mode" : "auto",
       "supported_features" : [ ]
     } ]
   }

Status Codes
------------

=========== ====================================
Status Code Description
=========== ====================================
200         Querying the migration task list.
400         Invalid request.
401         Invalid authentication information.
403         The request is rejected.
404         The requested resource is not found.
500         Internal service error.
=========== ====================================

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
