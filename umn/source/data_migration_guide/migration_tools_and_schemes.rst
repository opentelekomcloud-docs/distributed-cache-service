:original_name: dcs-migration-090626002.html

.. _dcs-migration-090626002:

Migration Tools and Schemes
===========================

Migration Tools
---------------

.. table:: **Table 1** Comparing Redis migration tools

   +---------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Tool/Command/Service            | Feature                                                                                                                                              | Description                                                                                                                                                                                                                                                                                                                |
   +=================================+======================================================================================================================================================+============================================================================================================================================================================================================================================================================================================================+
   | DCS console                     | Supports online migration (in full or incrementally) and backup migration (by importing backup files) with intuitive operations.                     | -  Backup migration is suitable when the source and target Redis instances are not connected, and the source Redis instance does not support the **SYNC** and **PSYNC** commands. To migrate data, import your backup files to OBS, and DCS will read data from OBS and migrate the data to the target DCS Redis instance. |
   |                                 |                                                                                                                                                      | -  Online migration is suitable when the source Redis instance supports the **SYNC** and **PSYNC** commands. Data in the source Redis instance can be migrated in full or incrementally to the target instance.                                                                                                            |
   +---------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | redis-cli                       | -  The Redis command line interface (CLI), which can be used to export data as an RDB file or import the AOF file (that is, all DBs) of an instance. | ``-``                                                                                                                                                                                                                                                                                                                      |
   |                                 | -  An AOF file is large file containing a full set of data change commands.                                                                          |                                                                                                                                                                                                                                                                                                                            |
   +---------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Rump                            | Supports online migration between DBs of an instance or between DBs of different instances.                                                          | Rump does not support incremental migration.                                                                                                                                                                                                                                                                               |
   |                                 |                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                            |
   |                                 |                                                                                                                                                      | Stop services before migrating data. Otherwise, keys might be lost. For details, see :ref:`Online Migration with Rump <dcs-migration-090626001_0>`.                                                                                                                                                                        |
   +---------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | redis-shake                     | An open-source tool that supports both online and offline migration.                                                                                 | redis-shake is suitable for migrating Redis Cluster data.                                                                                                                                                                                                                                                                  |
   +---------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Self-developed migration script | Flexible and can be adjusted as required.                                                                                                            | ``-``                                                                                                                                                                                                                                                                                                                      |
   +---------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Migration Schemes
-----------------

.. note::

   **Self-hosted Redis** refers to self-hosted Redis on this service, in another cloud, or in on-premises data centers.

.. table:: **Table 2** Migration schemes

   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Scenario                      | Tool            | Use Case                                                                                                                                                                                                     | Description                                                                                                                                                                                                                                                                                                          |
   +===============================+=================+==============================================================================================================================================================================================================+======================================================================================================================================================================================================================================================================================================================+
   | From self-hosted Redis to DCS | DCS console     | -  If the network between your self-hosted Redis instance and the DCS Redis instance is connected, follow to the instructions in :ref:`Online Migration of Self-Hosted Redis <dcs-migration-190703003>`.     | ``-``                                                                                                                                                                                                                                                                                                                |
   |                               |                 | -  If the network between your self-hosted Redis instance and the DCS Redis instance is not connected, follow to the instructions in :ref:`Backup Migration of Self-Hosted Redis <dcs-migration-190703002>`. |                                                                                                                                                                                                                                                                                                                      |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                               | redis-cli       | :ref:`Self-Hosted Redis Migration with redis-cli (AOF) <dcs-migration-0312010>`                                                                                                                              | ``-``                                                                                                                                                                                                                                                                                                                |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                               |                 | :ref:`Self-Hosted Redis Migration with redis-cli (RDB) <dcs-migration-0312011>`                                                                                                                              | ``-``                                                                                                                                                                                                                                                                                                                |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                               | redis-shake     | :ref:`Self-Hosted Redis Cluster Migration with redis-shake <dcs-migrate-demo02>`                                                                                                                             | ``-``                                                                                                                                                                                                                                                                                                                |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Between DCS instances         | DCS console     | Migrate data from an earlier-version DCS Redis instance to a later-version DCS Redis instance, for example, from a DCS Redis 3.0 instance to a DCS Redis 4.0 or 5.0 instance.                                | **Attempts to migrate data from a later-version Redis instance to an earlier-version Redis instance are not recommended because they will fail** due to data compatibility issues between different Redis versions.                                                                                                  |
   |                               |                 |                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                      |
   |                               |                 | -  If the network between the source and target DCS Redis instances is connected, follow to the instructions in :ref:`Online Migration Between DCS Redis Instances <dcs-migration-0312003>`.                 |                                                                                                                                                                                                                                                                                                                      |
   |                               |                 | -  If the network between the source and target DCS Redis instances is not connected, follow to the instructions in :ref:`Backup Migration Between Regions or Redis Versions <dcs-migration-0312004>`.       |                                                                                                                                                                                                                                                                                                                      |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                               |                 | Migrate Redis data between regions. For details, see :ref:`Backup Migration Between Regions or Redis Versions <dcs-migration-0312004>`.                                                                      | The **SYNC** and **PSYNC** commands are disabled by default for DCS Redis instances. These commands are enabled for online migration within a region, and remain disabled for online migration between regions. Therefore, you can only use backup migration when migrating DCS Redis instance data between regions. |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                               |                 | Migrate Redis data from one account to another.                                                                                                                                                              | ``-``                                                                                                                                                                                                                                                                                                                |
   |                               |                 |                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                      |
   |                               |                 | -  For details, see :ref:`Backup Migration Between Regions or Redis Versions <dcs-migration-0312004>`.                                                                                                       |                                                                                                                                                                                                                                                                                                                      |
   |                               |                 |                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                      |
   |                               |                 | -  If the DCS Redis instances of the two accounts are connected, you can also follow the instructions in :ref:`Online Migration Between DCS Redis Instances <dcs-migration-0312003>`.                        |                                                                                                                                                                                                                                                                                                                      |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | From another cloud to DCS     | DCS console     | -  If the **SYNC** and **PSYNC** commands are not disabled for the Redis service provided by another cloud, follow the instructions in :ref:`Online Migration from Another Cloud <dcs-migration-0312006>`.   | If online migration is required, contact the O&M personnel of another cloud to enable the **SYNC** and **PSYNC** commands.                                                                                                                                                                                           |
   |                               |                 | -  If the **SYNC** and **PSYNC** commands are disabled for the Redis service provided by another cloud, follow the instructions in :ref:`Backup Migration from Another Cloud <dcs-migration-1117001>`.       |                                                                                                                                                                                                                                                                                                                      |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                               | Rump            | :ref:`Online Migration with Rump <dcs-migration-090626001_0>`                                                                                                                                                | ``-``                                                                                                                                                                                                                                                                                                                |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                               | redis-shake     | :ref:`Offline Migration of Redis Cluster from Another Cloud with redis-shake <dcs-migrate-1117003>`                                                                                                          | ``-``                                                                                                                                                                                                                                                                                                                |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                               |                 | :ref:`Online Full Migration of Redis from Another Cloud with redis-shake <dcs-migrate-0220411>`                                                                                                              | ``-``                                                                                                                                                                                                                                                                                                                |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | From DCS to self-hosted Redis | DCS console     | :ref:`Migrating Data from DCS to Self-Hosted Redis <dcs-migration-0312007>`                                                                                                                                  | You can migrate data online from a DCS Redis instance to your self-hosted Redis by using the DCS console.                                                                                                                                                                                                            |
   +-------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
